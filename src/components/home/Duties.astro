---
import { Icon } from 'astro-icon/components'
import SectionTitle from '@components/base/SectionTitle.astro'

const dutiesData = [
    {
        iconName: 'wrench-screwdriver',
        text: 'Выполнение сантехнических работ в квартирах и офисах',
        description: 'Полный цикл работ по монтажу и обслуживанию сантехнических систем'
    },
    {
        iconName: 'screwdriver',
        text: 'Монтаж/демонтаж систем отопления, водоснабжения',
        description: 'Установка и замена радиаторов, труб, стояков и сопутствующего оборудования'
    },
    {
        iconName: 'magnifying-glass',
        text: 'Диагностика неисправностей и устранение протечек',
        description: 'Поиск и ликвидация аварийных ситуаций, профилактический осмотр систем'
    },
    {
        iconName: 'clock',
        text: 'Соблюдение сроков и стандартов качества на объектах',
        description: 'Работа в соответствии с техническими нормативами и графиками'
    }
];
---

<section class="bg-slate-50 py-16 lg:py-20" id="responsibilities">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
        <SectionTitle
                title="Чем предстоит заниматься"
                subtitle="Основные направления работы и профессиональные задачи сантехника в нашей компании"
        />

        <ul class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4 max-w-6xl mx-auto">
            {dutiesData.map((item, index) => (
                    <li class="group relative h-64 cursor-pointer">
                        <!-- Анимированный градиентный фон -->
                        <div class="absolute inset-0 bg-gradient-to-br from-[var(--accent-primary)]/5 via-transparent to-[var(--accent-primary)]/10 rounded-2xl opacity-0 group-hover:opacity-100 transition-all duration-700 scale-105 group-hover:scale-100" />

                        <!-- Светящаяся обводка -->
                        <div class="absolute inset-0 rounded-2xl bg-gradient-to-r from-[var(--accent-primary)]/20 to-[var(--accent-primary)]/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-sm group-hover:blur-0 scale-110 group-hover:scale-100" />

                        <!-- Основная карточка -->
                        <div class="relative h-full bg-white rounded-2xl border border-[var(--border-color)] shadow-sm transition-all duration-500 group-hover:shadow-2xl group-hover:-translate-y-4 group-hover:border-[var(--accent-primary)]/30 overflow-hidden">

                            <!-- Декоративные элементы -->
                            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--accent-primary)] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" />

                            <!-- Контент -->
                            <div class="relative z-10 h-full p-8 flex flex-col">

                                <!-- Иконка с анимацией -->
                                <div class="inline-flex items-center justify-center w-14 h-14 bg-[var(--accent-primary)]/10 rounded-2xl mb-6 group-hover:bg-[var(--accent-primary)] group-hover:scale-110 transition-all duration-500">
                                    <Icon
                                            name={item.iconName}
                                            class="w-7 h-7 text-[var(--accent-primary)] group-hover:text-white transition-colors duration-500"
                                    />
                                </div>

                                <!-- Заголовок -->
                                <h3 class="text-lg font-semibold text-[var(--hero-text-primary)] mb-4 leading-tight group-hover:text-[var(--accent-primary)] transition-colors duration-500">
                                    {item.text}
                                </h3>

                                <!-- Описание (появляется при наведении) -->
                                <div class="flex-grow overflow-hidden">
                                    <p class="text-[var(--hero-text-secondary)] text-sm leading-relaxed transform translate-y-8 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 delay-100">
                                        {item.description}
                                    </p>
                                </div>

                                <!-- Номер с анимацией -->
                                <div class="absolute top-6 right-6 w-8 h-8 bg-[var(--accent-primary)] text-white text-xs font-bold rounded-full flex items-center justify-center group-hover:scale-125 group-hover:rotate-12 transition-transform duration-500">
                                    {index + 1}
                                </div>
                            </div>

                            <!-- Парящие частицы -->
                            <div class="absolute inset-0 overflow-hidden rounded-2xl">
                                <div class="absolute -top-4 -right-4 w-8 h-8 bg-[var(--accent-primary)]/20 rounded-full opacity-0 group-hover:opacity-100 group-hover:scale-150 transition-all duration-700 delay-200" />
                                <div class="absolute -bottom-2 -left-2 w-6 h-6 bg-[var(--accent-primary)]/15 rounded-full opacity-0 group-hover:opacity-100 group-hover:scale-125 transition-all duration-700 delay-300" />
                            </div>
                        </div>

                        <!-- Тень при поднятии -->
                        <div class="absolute inset-0 rounded-2xl bg-black/5 blur-md opacity-0 group-hover:opacity-100 -z-10 transition-opacity duration-500 group-hover:translate-y-2" />
                    </li>
            ))}
        </ul>

        <footer class="mt-16 text-center">
            <div class="inline-flex items-center gap-3 bg-[var(--accent-primary)]/10 rounded-2xl px-6 py-4 border border-[var(--border-color)] hover:bg-[var(--accent-primary)]/20 transition-colors duration-300">
                <Icon name="information-circle" class="w-5 h-5 text-[var(--accent-primary)]" />
                <span class="text-sm text-[var(--hero-text-secondary)] font-medium">Полный рабочий день • Обучение предоставляется • Опыт от 1 года</span>
            </div>
        </footer>
    </div>
</section>

<style>
    /* Анимация появления карточек */
    @keyframes cardSlideUp {
        from {
            opacity: 0;
            transform: translateY(40px) scale(0.95);
        }
        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    /* Анимация для последовательного появления */
    #responsibilities li {
        animation: cardSlideUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        opacity: 0;
    }

    #responsibilities li:nth-child(1) { animation-delay: 0.1s; }
    #responsibilities li:nth-child(2) { animation-delay: 0.2s; }
    #responsibilities li:nth-child(3) { animation-delay: 0.3s; }
    #responsibilities li:nth-child(4) { animation-delay: 0.4s; }

    /* Плавное появление секции */
    #responsibilities {
        animation: fadeIn 1s ease-out forwards;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }

    /* Улучшение производительности анимаций */
    @media (prefers-reduced-motion: reduce) {
        * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }
</style>