---
import { Icon } from 'astro-icon/components'
import SectionTitle from '@components/base/SectionTitle.astro'

const dutiesData = [
    {
        iconName: 'wrench-screwdriver',
        text: 'Выполнение сантехнических работ в квартирах и офисах',
        description: 'Полный цикл работ по монтажу и обслуживанию сантехнических систем'
    },
    {
        iconName: 'pipeline',
        text: 'Монтаж/демонтаж систем отопления, водоснабжения',
        description: 'Установка и замена радиаторов, труб, стояков и сопутствующего оборудования'
    },
    {
        iconName: 'magnifying-glass',
        text: 'Диагностика неисправностей и устранение протечек',
        description: 'Поиск и ликвидация аварийных ситуаций, профилактический осмотр систем'
    },
    {
        iconName: 'clock',
        text: 'Соблюдение сроков и стандартов качества на объектах',
        description: 'Работа в соответствии с техническими нормативами и графиками'
    }
];
---

<section class="bg-white py-16 lg:py-20 opacity-0 animate-fadeInContent" id="responsibilities">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
            <SectionTitle 
                title="Чем предстоит заниматься"
                subtitle="Основные направления работы и профессиональные задачи сантехника в нашей компании"
            />

        <ul class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4 max-w-6xl mx-auto perspective-1000 opacity-0 animate-fadeInContent" style="animation-delay: 0.5s;">
            {dutiesData.map((item, index) => (
                    <li class="relative h-64 cursor-pointer opacity-0 animate-fadeInContent" style={`animation-delay: ${index * 100 + 700}ms;`}>
                        <div class="flip-card-inner w-full h-full transition-transform duration-700 transform-style-preserve-3d group-hover:rotate-y-180">
                            {/* Лицевая сторона */}
                            <div class="flip-card-front absolute inset-0 bg-white rounded-2xl p-8 border border-[var(--border-color)] shadow-sm flex flex-col">
                                <div class="inline-flex items-center justify-center w-12 h-12 bg-[var(--accent-primary)]/10 rounded-xl mb-6">
                                    <Icon name={item.iconName} class="w-6 h-6 text-[var(--accent-primary)]" />
                                </div>
                                <h3 class="text-lg font-semibold text-[var(--hero-text-primary)] mb-4">{item.text}</h3>
                                <div class="mt-auto">
                                    <span class="text-[var(--accent-primary)] text-sm font-medium">Подробнее →</span>
                                </div>
                                <div class="absolute top-6 right-6 w-8 h-8 bg-[var(--accent-primary)] text-white text-xs font-bold rounded-full flex items-center justify-center">
                                    {index + 1}
                                </div>
                            </div>

                            {/* Обратная сторона */}
                            <div class="flip-card-back absolute inset-0 bg-[var(--accent-primary)]/10 rounded-2xl p-8 border border-[var(--accent-primary)]/20 shadow-lg flex flex-col rotate-y-180">
                                <h3 class="text-lg font-semibold text-[var(--accent-primary)] mb-4">{item.text}</h3>
                                <p class="text-[var(--hero-text-primary)] text-sm leading-relaxed flex-grow">{item.description}</p>
                                <div class="mt-auto text-right">
                                    <span class="text-xs text-[var(--hero-text-secondary)]">#{index + 1}</span>
                                </div>
                            </div>
                        </div>
                    </li>
            ))}
        </ul>

        <footer class="mt-16 text-center">
            <div class="inline-flex items-center gap-3 bg-[var(--accent-primary)]/10 rounded-2xl px-6 py-4 border border-[var(--border-color)]">
                <Icon name="information-circle" class="w-5 h-5 text-[var(--accent-primary)]" />
                <span class="text-sm text-[var(--hero-text-secondary)] font-medium">Полный рабочий день • Обучение предоставляется • Опыт от 1 года</span>
            </div>
        </footer>
    </div>
</section>

<style is:global>
    .perspective-1000 {
        perspective: 1000px;
    }
    .flip-card-inner {
        transform-style: preserve-3d;
        position: relative;
    }
    .flip-card-front,
    .flip-card-back {
        backface-visibility: hidden;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden;
    }
    .flip-card-back {
        transform: rotateY(180deg);
    }
</style>